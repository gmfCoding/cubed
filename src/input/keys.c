/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   keys.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: clovell <clovell@student.42.fr>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/11/23 21:16:03 by clovell           #+#    #+#             */
/*   Updated: 2024/03/11 20:40:38 by clovell          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stddef.h>
#include "keys.h"
#define MAPVAL_DEL "\033[1C\b"

static const int			g_keymapkey[] = {
	KEY_SPACE,
	KEY_APOSTROPH,
	KEY_COMMA,
	KEY_PERIOD,
	KEY_MINUS,
	KEY_EQUALS,
	KEY_FSLASH,
	KEY_BSLASH,
	KEY_0,
	KEY_1,
	KEY_2,
	KEY_3,
	KEY_4,
	KEY_5,
	KEY_6,
	KEY_7,
	KEY_8,
	KEY_9,
	KEY_SEMICOLON,
	KEY_TILDA,
	KEY_SQBLEFT,
	KEY_SQBRIGHT,
	KEY_TAB,
	KEY_A,
	KEY_B,
	KEY_C,
	KEY_D,
	KEY_E,
	KEY_F,
	KEY_G,
	KEY_H,
	KEY_I,
	KEY_J,
	KEY_K,
	KEY_L,
	KEY_M,
	KEY_N,
	KEY_O,
	KEY_P,
	KEY_Q,
	KEY_R,
	KEY_S,
	KEY_T,
	KEY_U,
	KEY_V,
	KEY_W,
	KEY_X,
	KEY_Y,
	KEY_Z,
	KEY_BACKSPACE,
	KEY_ENTER,
	KEY_LCTRL,
	KEY_RCTRL,
	KEY_CAPS,
	KEY_LSHIFT,
	KEY_RSHIFT,
	KEY_LALT,
	KEY_RALT,
	KEY_DEL,
	KEY_ESC,
	KEY_LARROW,
	KEY_UARROW,
	KEY_RARROW,
	KEY_DARROW,
	KEY_F1,
	KEY_F2,
	KEY_F3,
	KEY_F4,
	KEY_F5,
	KEY_F6,
	KEY_F7,
	KEY_F8,
	KEY_F9,
	KEY_F10,
	KEY_F11,
	KEY_F12,
	KEY_F14,
	KEY_MENU,
	KEY_HOME,
	KEY_PGUP,
	KEY_PGDW,
	KEY_END,
	KEY_INS,
	KEY_SCRLCK,
	KEY_NP_LOCK,
	KEY_NP_1,
	KEY_NP_2,
	KEY_NP_3,
	KEY_NP_4,
	KEY_NP_5,
	KEY_NP_6,
	KEY_NP_7,
	KEY_NP_8,
	KEY_NP_9,
	KEY_NP_0,
	KEY_NP_DIV,
	KEY_NP_ADD,
	KEY_NP_MULT,
	KEY_NP_SUB,
	KEY_NP_EQUAL,
	KEY_NP_ENTER,
	KEY_NP_PERIOD,
	MB_LEFT,
	MB_RIGHT,
	MB_MIDDLE,
	MB_SCRLDW,
	MB_SCRLUP,
	0,
};

static const char *const	g_keymapval[] = {
	"  ",
	"\'\"",
	",<",
	".>",
	"-_",
	"=+",
	"/\?",
	"\\|",
	"0)",
	"1!",
	"2@",
	"3#",
	"4$",
	"5%",
	"6^",
	"7&",
	"8*",
	"9(",
	";:",
	"`~",
	"[{",
	"]}",
	"\t\t",
	"aA",
	"bB",
	"cC",
	"dD",
	"eE",
	"fF",
	"gG",
	"hH",
	"iI",
	"jJ",
	"kK",
	"lL",
	"mM",
	"nN",
	"oO",
	"pP",
	"qQ",
	"rR",
	"sS",
	"tT",
	"uU",
	"vV",
	"wW",
	"xX",
	"yY",
	"zZ",
	"\b",
	"\n",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	MAPVAL_DEL,
	"\e",
	"\033[1D",
	"\033[1A",
	"\033[1C",
	"\033[1B", // DOWN
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"",
	"1",
	"2",
	"3",
	"4",
	"5",
	"6",
	"7",
	"8",
	"9",
	"0",
	"/",
	"+",
	"*",
	"-",
	"=",
	"\e",
	MAPVAL_DEL,
	"",
	"",
	"",
	"",
	"",
	"",
};

static const char *const	g_keymapname[] = {
	"KEY_SPACE",
	"KEY_APOSTROPH",
	"KEY_COMMA",
	"KEY_PERIOD",
	"KEY_MINUS",
	"KEY_EQUALS",
	"KEY_FSLASH",
	"KEY_BSLASH",
	"KEY_0",
	"KEY_1",
	"KEY_2",
	"KEY_3",
	"KEY_4",
	"KEY_5",
	"KEY_6",
	"KEY_7",
	"KEY_8",
	"KEY_9",
	"KEY_SEMICOLON",
	"KEY_TILDA",
	"KEY_SQBLEFT",
	"KEY_SQBRIGHT",
	"KEY_TAB",
	"KEY_A",
	"KEY_B",
	"KEY_C",
	"KEY_D",
	"KEY_E",
	"KEY_F",
	"KEY_G",
	"KEY_H",
	"KEY_I",
	"KEY_J",
	"KEY_K",
	"KEY_L",
	"KEY_M",
	"KEY_N",
	"KEY_O",
	"KEY_P",
	"KEY_Q",
	"KEY_R",
	"KEY_S",
	"KEY_T",
	"KEY_U",
	"KEY_V",
	"KEY_W",
	"KEY_X",
	"KEY_Y",
	"KEY_Z",
	"KEY_BACKSPACE",
	"KEY_ENTER",
	"KEY_LCTRL",
	"KEY_RCTRL",
	"KEY_CAPS",
	"KEY_LSHIFT",
	"KEY_RSHIFT",
	"KEY_LALT",
	"KEY_RALT",
	"KEY_DEL",
	"KEY_ESC",
	"KEY_LARROW",
	"KEY_UARROW",
	"KEY_RARROW",
	"KEY_DARROW",
	"KEY_F1",
	"KEY_F2",
	"KEY_F3",
	"KEY_F4",
	"KEY_F5",
	"KEY_F6",
	"KEY_F7",
	"KEY_F8",
	"KEY_F9",
	"KEY_F10",
	"KEY_F11",
	"KEY_F12",
	"KEY_F14",
	"KEY_MENU",
	"KEY_HOME",
	"KEY_PGUP",
	"KEY_PGDW",
	"KEY_END",
	"KEY_INS",
	"KEY_SCRLCK",
	"KEY_NP_LOCK",
	"KEY_NP_1",
	"KEY_NP_2",
	"KEY_NP_3",
	"KEY_NP_4",
	"KEY_NP_5",
	"KEY_NP_6",
	"KEY_NP_7",
	"KEY_NP_8",
	"KEY_NP_9",
	"KEY_NP_0",
	"KEY_NP_DIV",
	"KEY_NP_ADD",
	"KEY_NP_MULT",
	"KEY_NP_SUB",
	"KEY_NP_EQUAL",
	"KEY_NP_ENTER",
	"KEY_NP_PERIOD",
	"MB_LEFT",
	"MB_RIGHT",
	"MB_MIDDLE",
	"MB_SCRLDW",
	"MB_SCRLUP",
	"KEY_INVALID",
};

void	key_get_mapkey(const int **array, int *size)
{
	if (size != NULL)
		*size = sizeof(g_keymapkey) / sizeof(*g_keymapkey);
	*array = g_keymapkey;
}

void	key_get_mapstr(const char *const **array, int *size, bool name)
{
	if (name)
	{
		if (size != NULL)
			*size = sizeof(g_keymapname) / sizeof(*g_keymapname);
		*array = g_keymapname;
	}
	else
	{
		if (size != NULL)
			*size = sizeof(g_keymapval) / sizeof(*g_keymapval);
		*array = g_keymapval;
	}
}

int	key_get_index(int key)
{
	int	i;

	i = -1;
	while (++i < (int)(sizeof(g_keymapkey) / sizeof(*g_keymapkey)))
	{
		if (key == g_keymapkey[i])
			return (i);
	}
	return (sizeof(g_keymapkey) / sizeof(*g_keymapkey) - 1);
}

const char	*key_get_keystr(int key, bool name)
{
	const char *const	*map;

	key_get_mapstr(&map, NULL, name);
	return (map[key_get_index(key)]);
}
